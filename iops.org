:PROPERTIES:
:ID:       5F215FE9-8C9C-4D59-964F-02CE1E62F6D5
:END:
#+TITLE: iops

IOPS 指硬盘每秒输入输出量或读写次数。

* 机械硬盘
  机械硬盘理论最大 IOPS 可以通过平均寻道时间和平均等待时间来计算，值为「1000ms/(寻道时间+等待时间)」。

  其中：
  + 平均寻道时间指磁头移动到指定磁道所需的时间，单位为 ms。有转速、单碟容量等多个因素决定。
  + 平均等待时间指磁头已处于指定磁道，等待所要访问的扇区旋转至磁头下方的时间。通常为盘片旋转半周所需时间。可以根据转速计算得到
  + 转速 RPM 为磁盘没分钟旋转多少周，那么平均等待时间就是 1m = (60 * 1000)ms, 60 * 1000 / RPM / 2

* SSD
  SSD 无高速旋转的组件，多通道并发。比有更高的 IOPS，同时并发能力强可以利用 aio 最大化利用并发能力。

  特别在使用 fio 这类测试工具测试 SSD 盘时，应该使用 ~-ioengine=libaio~ 和 ~--iodepth=~ 参数指定单次提交的 io 请求数量以最大化利用 SSD 盘的并发能力。

* 常见硬盘 IOPS 参考值
  机械硬盘：
  |-------------+-----------+------------+-------------|
  | Drive/RPM   | 4k random | 64k random | 512K random |
  |-------------+-----------+------------+-------------|
  | SAS / 15K   | 188 - 203 | 175 - 192  | 115 – 135   |
  | FC / 15K    | 163 - 178 | 151 - 169  | 97 – 123    |
  | FC / 10K    | 142 - 151 | 130 – 143  | 80 – 104    |
  | SAS / 10K   | 142 - 151 | 130 – 143  | 80 – 104    |
  | SATA / 7200 | 73 - 79   | 69 - 76    | 47 – 63     |
  | SATA / 5400 | 57        | 55         | 44          |
  |-------------+-----------+------------+-------------|

  SSD:
  |----------------------+------+------------------+---------------|
  | Device               | Type | IOPS             | Interface     |
  |----------------------+------+------------------+---------------|
  | Intel X25-M G2 (MLC) | SSD  | ~8,600 IOPS      | SATA 3 Gbit/s |
  | Intel X25-E (SLC)    | SSD  | ~5,000 IOPS      | SATA 3 Gbit/s |
  | G.Skill Phoenix Pro  | SSD  | ~20,000 IOPS     | SATA 3 Gbit/s |
  |----------------------+------+------------------+---------------|

* 参考
  + [[https://en.wikipedia.org/wiki/IOPS][IOPS - Wikipedia]]
  + [[https://help.aliyun.com/document_detail/147897.html][测试块存储性能]]

