:PROPERTIES:
:ID:       D771D05F-107D-4AE3-BDB1-39A52370F28F
:END:
#+TITLE: VLAN

VLAN（Virtual Local Area Network）即虚拟局域网，是将一个物理的局域网在逻辑上划分成多个广播域的技术。通过在交换机上配置 VLAN，可以实现在同一个 VLAN 内的用户可以进行二层互访，而不同 VLAN 间的用户被二层隔离。
这样既能够隔离广播域，又能够提升网络的安全性。

本质上 VLAN 是在 *二层* 网络的基础上划分出来了多个逻辑二层网络，不同的二层网络间不互通，实现方式是 IEEE 802.1q 标准对 Ethernet 帧格式进行了修改，在源 MAC 地址字段和协议类型字段之间加入 4 字节的 802.1q Tag。

通过 Tag 对网络进行区分，但同时也存在一些问题：
1. VLAN Tag 总共有 4 个字节，其中只有 12 bit 用来标识不同的二层网络，故而最多只能支持 4096 个子网的划分，这无法承载大量的租户网络需求
2. VLAN 的连接需要二层互通，但在跨数据中心时，不同数据中心的二层不直接互通（MAC 帧无法直达，需要经过多次路由跳转），使得通过 VLAN 划分的网络范围较为固定

